---
title: 'SPA 性能优化'
date: '2019-08-27'
tags: 'web 性能优化'
quote: '页面初始加载的 HTML 页面中无网页展示内容，需要加载执行JavaScript 文件中的 React 代码，通过 JavaScript 渲染生成页面，同时...'
titlePic: 'http://images.qiyu1205.top/GU2A4430.jpg'
---

## 名词概念

**客户端渲染(Client Side Render) CSR**
    页面初始加载的 HTML 页面中无网页展示内容，需要加载执行JavaScript 文件中的 React 代码，通过 JavaScript 渲染生成页面，同时，JavaScript 代码会完成页面交互事件的绑定。

**服务端渲染(Server Side Render) SSR**
    用户请求服务器，服务器上直接生成 HTML 内容并返回给浏览器。服务器端渲染来，页面的内容是由 Server 端生成的。一般来说，服务器端渲染的页面交互能力有限，如果要实现复杂交互，还是要通过引入 JavaScript 文件来辅助实现。服务器端渲染这个概念，适用于任何后端语言。

**同构**
   同构这个概念存在于 Vue，React 这些新型的前端框架中，同构实际上是客户端渲染和服务器端渲染的一个整合。我们把页面的展示内容和交互写在一起，让代码执行两次。在服务器端执行一次，用于实现服务器端渲染，在客户端再执行一次，用于接管页面交互。

**TTFP(Time To First Page)**
    首次渲染时间

## SPA的缺点

1. TTFP时间较长，在SPA中首先要加载React代码，然后通过JavaScript渲染生成页面，这个周期耗时较长。
2. 不利于SEO， 这是因为搜索引擎主要识别内容为HTML

## 解决方案

我参与的项目不需要SEO，但是对首屏渲染时长有要求，目前比较主流的解决方案有两种

1.预渲染 

2.SSR

这两者的思想其实都差不多 预先运行React代码将首页渲染出来直接返回渲染好的HTML给客户端，这样就能大大减少从网络请求到展示的时间。

两种方案的优劣

预渲染比较适合 小型的静态页面（数据不经常变动） 不需要后端配合 相对来说实现成本更低，弱网环境下，预渲染能更快的呈现页面内容

SSR 配置相对来说复杂，维护成本高。需要后端配合 node作为中间层
